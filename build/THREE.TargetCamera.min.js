/**
 * THREE.TargetCamera.js 0.1.0
 * (c) 2013 Luke Moody (http://www.github.com/squarefeet)
 *
 * THREE.TargetCamera may be freely distributed under the MIT license
 *  (See the LICENSE file at root of this repository.)
 */
THREE.TargetCamera=function(a){THREE.Camera.call(this),this.fov=void 0!==a.fov?a.fov:50,this.aspect=void 0!==a.aspect?a.aspect:1,this.near=void 0!==a.near?a.near:.1,this.far=void 0!==a.far?a.far:2e3,this.target=a.target,this.mode=void 0!==a.mode?a.mode:"third",this.firstPersonStiffness=void 0!==a.firstPersonStiffness?a.firstPersonStiffness:1,this.thirdPersonStiffness=void 0!==a.thirdPersonStiffness?a.thirdPersonStiffness:.1,this.modeTransitionStiffness=void 0!==a.modeTransitionStiffness?a.modeTransitionStiffness:.3,this.firstPersonPosition=void 0!==a.firstPersonPosition?a.firstPersonPosition:new THREE.Vector3,this.thirdPersonPosition=void 0!==a.thirdPersonPosition?a.thirdPersonPosition:new THREE.Vector3(0,50,100),this._idealObject=new THREE.Object3D,this._isTransitioning=!1,this.updateProjectionMatrix(),this.position.copy("first"===this.mode?this.firstPersonPosition:this.thirdPersonPosition)},THREE.TargetCamera.prototype=Object.create(THREE.PerspectiveCamera.prototype),THREE.TargetCamera.prototype._translateIdealObject=function(a){var b=this._idealObject;0!==a.x&&b.translateX(a.x),0!==a.y&&b.translateY(a.y),0!==a.z&&b.translateZ(a.z)},THREE.TargetCamera.prototype.setMode=function(a){a!==this.mode&&(this.mode=a,this._isTransitioning=!0)},THREE.TargetCamera.prototype.update=function(){var a=this.target,b=this.mode,c=this._idealObject;a&&(c.position.copy(this.target.position),c.quaternion.copy(this.target.quaternion),this._translateIdealObject("first"===b?this.firstPersonPosition:this.thirdPersonPosition),this._isTransitioning?(this.position.lerp(c.position,this.modeTransitionStiffness),this.quaternion.slerp(c.quaternion,this.modeTransitionStiffness),this.position.distanceTo(c.position)<1&&(this._isTransitioning=!1)):"first"===b?(this.position.lerp(c.position,this.firstPersonStiffness),this.quaternion.slerp(c.quaternion,this.firstPersonStiffness)):(this.position.lerp(c.position,this.thirdPersonStiffness),this.quaternion.slerp(c.quaternion,this.thirdPersonStiffness)))};